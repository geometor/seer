**Python Code Instructions**

- Using your natural language description, develop a Python function that transforms any given input grid into the correct output grid.
- Leverage common libraries (e.g., numpy, sympy) if needed.
- Ensure your code covers all edge cases as per the transformation rule.
- Place the natural language description in the top docstring of the function.
- Break logic into sub-functions for clarity - particularly identifying objects and properties.
- Use comments to describe the workflow.
- All major math, science and analysis libraries are available to you.
